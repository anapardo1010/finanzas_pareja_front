import{a as Y}from"./chunk-6YES43QF.js";import{a as N}from"./chunk-O6ZGKSUK.js";import{f as ie,h as I,k as z,l as ae,n as re,s as D,t as F}from"./chunk-6SYOXZTD.js";import{b as V,c as C,d as A,e as j,h as B,i as ce,k as L,l as q,m as de,n as se,o as le,p as me,q as pe,s as ge,t as $,v as R}from"./chunk-LBFPTU6L.js";import{g as w}from"./chunk-JJXHLCZR.js";import{$a as a,Ja as P,Q as M,Ua as p,V as x,Va as g,W as y,Wa as ne,X as ee,Xa as k,Xb as E,Y as te,Ya as S,Za as f,_a as t,a as Z,ab as m,ba as T,db as v,eb as l,fa as b,fb as s,lb as oe,mb as h,ob as c,pb as u,qb as O,wa as r}from"./chunk-UF2Z5XWL.js";function he(n,i){if(n&1&&(t(0,"div",5)(1,"span",16),c(2,"\u26A0\uFE0F"),a(),t(3,"span"),c(4),a()()),n&2){let e=s();r(4),u(e.error())}}function xe(n,i){if(n&1&&(t(0,"span",10),c(1),a()),n&2){let e=s();r(),u(e.getErrorMessage("name"))}}function ye(n,i){if(n&1&&(t(0,"span",10),c(1),a()),n&2){let e=s();r(),u(e.getErrorMessage("description"))}}function Me(n,i){n&1&&(m(0,"span",17),c(1," Guardando... "))}function Pe(n,i){if(n&1&&c(0),n&2){let e=s();O(" ",e.isEditing?"Actualizar":"Crear"," ")}}var G=class n{fb=M($);categoryService=M(N);authService=M(w);category=null;save=new T;cancel=new T;form;submitting=b(!1);error=b(null);ngOnInit(){this.initForm()}initForm(){this.form=this.fb.group({name:[this.category?.name||"",[C.required,C.minLength(3)]],description:[this.category?.description||"",[C.maxLength(200)]]})}get isEditing(){return this.category!==null}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}let i=this.authService.getTenantId();if(!i){this.error.set("No se pudo obtener el ID del tenant");return}this.submitting.set(!0),this.error.set(null);let e={tenantId:i,name:this.form.value.name,description:this.form.value.description||""};(this.isEditing?this.categoryService.updateCategory(this.category.id,e):this.categoryService.createCategory(e)).subscribe({next:()=>{this.submitting.set(!1),this.save.emit()},error:d=>{this.submitting.set(!1),this.error.set(d.error?.message||"Error al guardar la categor\xEDa")}})}onCancel(){this.cancel.emit()}hasError(i){let e=this.form.get(i);return!!(e&&e.invalid&&(e.dirty||e.touched))}getErrorMessage(i){let e=this.form.get(i);return e?e.hasError("required")?"Este campo es requerido":e.hasError("minlength")?`M\xEDnimo ${e.errors?.minlength.requiredLength} caracteres`:e.hasError("maxlength")?`M\xE1ximo ${e.errors?.maxlength.requiredLength} caracteres`:"":""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-category-form"]],inputs:{category:"category"},outputs:{save:"save",cancel:"cancel"},decls:28,vars:12,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content","glass-modal",3,"click"],[1,"modal-header"],["title","Cerrar",1,"btn-close",3,"click"],[3,"ngSubmit","formGroup"],[1,"alert","alert-error"],[1,"form-group"],["for","name",1,"form-label"],[1,"required"],["type","text","id","name","formControlName","name","placeholder","Ej: Comida, Transporte, Entretenimiento","autocomplete","off",1,"form-input"],[1,"error-message"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Descripci\xF3n opcional de la categor\xEDa","rows","3",1,"form-textarea"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert-icon"],[1,"spinner-small"]],template:function(e,o){e&1&&(t(0,"div",0),l("click",function(){return o.onCancel()}),t(1,"div",1),l("click",function(_){return _.stopPropagation()}),t(2,"header",2)(3,"h2"),c(4),a(),t(5,"button",3),l("click",function(){return o.onCancel()}),t(6,"span"),c(7,"\u2715"),a()()(),t(8,"form",4),l("ngSubmit",function(){return o.onSubmit()}),p(9,he,5,1,"div",5),t(10,"div",6)(11,"label",7),c(12," Nombre "),t(13,"span",8),c(14,"*"),a()(),m(15,"input",9),p(16,xe,2,1,"span",10),a(),t(17,"div",6)(18,"label",11),c(19," Descripci\xF3n "),a(),m(20,"textarea",12),p(21,ye,2,1,"span",10),a(),t(22,"div",13)(23,"button",14),l("click",function(){return o.onCancel()}),c(24," Cancelar "),a(),t(25,"button",15),p(26,Me,2,0)(27,Pe,1,1),a()()()()()),e&2&&(r(4),u(o.isEditing?"Editar Categor\xEDa":"Nueva Categor\xEDa"),r(4),f("formGroup",o.form),r(),g(o.error()?9:-1),r(6),h("error",o.hasError("name")),r(),g(o.hasError("name")?16:-1),r(4),h("error",o.hasError("description")),r(),g(o.hasError("description")?21:-1),r(2),f("disabled",o.submitting()),r(2),f("disabled",o.submitting()||o.form.invalid),r(),g(o.submitting()?26:27))},dependencies:[E,R,B,V,A,j,q,L],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out;padding:1rem}.modal-content[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d,0 4px 16px #0000001a;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1);overflow:hidden}.glass-modal[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(40px);-webkit-backdrop-filter:blur(40px);border:1px solid rgba(255,255,255,.18)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem 2rem;border-bottom:1px solid rgba(0,0,0,.06)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1d1d1f;margin:0;letter-spacing:-.02em}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#0000000a;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;font-size:1.25rem;color:#6e6e73}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#00000014;color:#1d1d1f}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:active{transform:scale(.95)}form[_ngcontent-%COMP%]{padding:2rem}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;border-radius:12px;margin-bottom:1.5rem;font-size:.9375rem}.alert.alert-error[_ngcontent-%COMP%]{background:#ff3b301a;color:#ff3b30;border:1px solid rgba(255,59,48,.2)}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{font-size:1.25rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.form-label[_ngcontent-%COMP%]{display:block;font-size:.9375rem;font-weight:600;color:#1d1d1f;margin-bottom:.5rem}.form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ff3b30;margin-left:.25rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:.9375rem;color:#1d1d1f;background:#f5f5f7;border:2px solid rgba(0,0,0,.06);border-radius:12px;transition:all .2s ease;font-family:inherit;outline:none}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#8e8e93}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{border-color:#007aff;background:#fff;box-shadow:0 0 0 4px #007aff1a}.form-input.error[_ngcontent-%COMP%], .form-textarea.error[_ngcontent-%COMP%]{border-color:#ff3b30}.form-input.error[_ngcontent-%COMP%]:focus, .form-textarea.error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #ff3b301a}.form-input[_ngcontent-%COMP%]:disabled, .form-textarea[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit}.error-message[_ngcontent-%COMP%]{display:block;font-size:.8125rem;color:#ff3b30;margin-top:.375rem;font-weight:500}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;padding-top:1.5rem;margin-top:1.5rem;border-top:1px solid rgba(0,0,0,.06)}.btn[_ngcontent-%COMP%]{flex:1;padding:.875rem 1.5rem;font-size:.9375rem;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn[_ngcontent-%COMP%]:not(:disabled):active{transform:scale(.98)}.btn-secondary[_ngcontent-%COMP%]{background:#0000000a;color:#1d1d1f}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#00000014}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007aff,#0051d5);color:#fff;box-shadow:0 4px 12px #007aff4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #007aff66;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media(max-width:768px){.modal-content[_ngcontent-%COMP%]{max-width:calc(100% - 2rem)}.modal-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}form[_ngcontent-%COMP%]{padding:1.5rem}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}.modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})};var ve=(n,i)=>i.id;function Oe(n,i){n&1&&(t(0,"div",1),m(1,"div",6),t(2,"p"),c(3,"Cargando categor\xEDas..."),a()())}function Ee(n,i){if(n&1){let e=v();t(0,"div",2),m(1,"lucide-icon",7),t(2,"h3"),c(3,"Sin categor\xEDas"),a(),t(4,"p"),c(5,"Crea tu primera categor\xEDa para organizar tus transacciones"),a(),t(6,"button",8),l("click",function(){x(e);let d=s();return y(d.openCreateForm())}),m(7,"lucide-icon",7),c(8," Crear Categor\xEDa "),a()()}if(n&2){let e=s();r(),f("img",e.Folder)("size",48),r(6),f("img",e.Plus)("size",18)}}function we(n,i){if(n&1){let e=v();t(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3",12),c(4),a(),t(5,"p",13),c(6),a()(),t(7,"div",14)(8,"span",15),c(9),a()()(),t(10,"div",16)(11,"button",17),l("click",function(){let d=x(e).$implicit,_=s(2);return y(_.editCategory(d))}),m(12,"lucide-icon",7),a(),t(13,"button",18),l("click",function(){let d=x(e).$implicit,_=s(2);return y(_.deleteCategory(d))}),m(14,"lucide-icon",7),a()()()}if(n&2){let e=i.$implicit,o=s(2);r(4),u(e.name),r(2),u(e.description||"Sin descripci\xF3n"),r(2),h("active",e.isActive),r(),O(" ",e.isActive?"Activa":"Inactiva"," "),r(3),f("img",o.Edit2)("size",16),r(2),f("img",o.Trash2)("size",16)}}function ke(n,i){if(n&1&&(t(0,"div",3),k(1,we,15,9,"div",9,ve),a()),n&2){let e=s();r(),S(e.categories())}}function Se(n,i){if(n&1){let e=v();t(0,"button",19),l("click",function(){x(e);let d=s();return y(d.openCreateForm())}),m(1,"lucide-icon",7),a()}if(n&2){let e=s();r(),f("img",e.Plus)("size",20)}}function Te(n,i){if(n&1){let e=v();t(0,"app-category-form",20),l("save",function(){x(e);let d=s();return y(d.handleFormSave())})("cancel",function(){x(e);let d=s();return y(d.closeForm())}),a()}if(n&2){let e=s();f("category",e.selectedCategory())}}var J=class n{categoryService=M(N);authService=M(w);Folder=I;Edit2=z;Trash2=re;Plus=ae;categories=b([]);loading=b(!1);showForm=b(!1);selectedCategory=b(null);ngOnInit(){console.log("CategoriesTab inicializado"),console.log("TenantId:",this.authService.getTenantId()),console.log("Usuario:",this.authService.currentUser()),this.loadCategories()}loadCategories(){let i=this.authService.getTenantId();if(console.log("Cargando categor\xEDas para tenantId:",i),!i){console.error("No hay tenantId - usuario no autenticado?"),this.loading.set(!1);return}this.loading.set(!0),this.categoryService.getByTenant(i,0,50).subscribe({next:e=>{console.log("Categor\xEDas cargadas:",e),this.categories.set(e.content),this.loading.set(!1)},error:e=>{console.error("Error loading categories:",e),this.loading.set(!1)}})}openCreateForm(){console.log("Abriendo formulario de categor\xEDa"),this.selectedCategory.set(null),this.showForm.set(!0),console.log("showForm:",this.showForm())}editCategory(i){this.selectedCategory.set(i),this.showForm.set(!0)}deleteCategory(i){confirm(`\xBFEliminar la categor\xEDa "${i.name}"?`)&&this.categoryService.deleteCategory(i.id).subscribe({next:()=>{this.loadCategories()},error:e=>{console.error("Error deleting category:",e)}})}handleFormSave(){this.showForm.set(!1),this.loadCategories()}closeForm(){this.showForm.set(!1),this.selectedCategory.set(null)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-categories-tab"]],decls:6,vars:3,consts:[[1,"categories-tab-compact"],[1,"loading-container"],[1,"empty-state"],[1,"categories-grid-compact"],["title","Crear categor\xEDa",1,"fab-compact"],[3,"category"],[1,"spinner"],[3,"img","size"],[1,"btn-primary",3,"click"],[1,"category-card-compact"],[1,"card-content"],[1,"category-info"],[1,"category-name"],[1,"category-description"],[1,"card-footer"],[1,"badge"],[1,"category-actions"],["title","Editar",1,"btn-icon-compact",3,"click"],["title","Eliminar",1,"btn-icon-compact","delete",3,"click"],["title","Crear categor\xEDa",1,"fab-compact",3,"click"],[3,"save","cancel","category"]],template:function(e,o){e&1&&(t(0,"div",0),p(1,Oe,4,0,"div",1)(2,Ee,9,4,"div",2)(3,ke,3,0,"div",3),p(4,Se,2,2,"button",4),p(5,Te,1,1,"app-category-form",5),a()),e&2&&(r(),g(o.loading()?1:o.categories().length===0?2:3),r(3),g(o.categories().length>0&&!o.loading()?4:-1),r(),g(o.showForm()?5:-1))},dependencies:[E,G,F,D],styles:[".categories-tab-compact[_ngcontent-%COMP%]{position:relative;min-height:300px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#6e6e73}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid rgba(0,122,255,.1);border-top-color:#007aff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]{color:#8e8e93;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1d1d1f;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6e6e73;margin:0 0 24px;max-width:400px}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:linear-gradient(135deg,#007aff,#0051d5);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #007aff4d}.categories-grid-compact[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.category-card-compact[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#f5f5f7;border-radius:10px;border:1px solid rgba(0,0,0,.08);transition:all .2s ease}.category-card-compact[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000014}.category-card-compact[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1;min-width:0}.category-card-compact[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]{margin-bottom:8px}.category-card-compact[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#1d1d1f;margin:0 0 4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.category-card-compact[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-description[_ngcontent-%COMP%]{font-size:13px;color:#6e6e73;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.category-card-compact[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 10px;background:#8e8e931f;color:#6e6e73;border-radius:6px;font-size:12px;font-weight:600}.category-card-compact[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .badge.active[_ngcontent-%COMP%]{background:#34c75926;color:#34c759}.category-card-compact[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]{display:flex;gap:6px;margin-left:12px}.category-card-compact[_ngcontent-%COMP%]   .btn-icon-compact[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:1px solid rgba(0,0,0,.08);border-radius:8px;cursor:pointer;transition:all .2s ease;color:#6e6e73}.category-card-compact[_ngcontent-%COMP%]   .btn-icon-compact[_ngcontent-%COMP%]:hover{background:#eaeaea;border-color:#007aff;color:#007aff}.category-card-compact[_ngcontent-%COMP%]   .btn-icon-compact.delete[_ngcontent-%COMP%]:hover{border-color:#ff3b30;color:#ff3b30;background:#ff3b301a}.fab-compact[_ngcontent-%COMP%]{bottom:2rem;right:2rem;width:64px;height:64px;position:fixed;bottom:24px;right:24px;width:56px;height:56px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#007aff,#0051d5);color:#fff;border:none;border-radius:50%;box-shadow:0 4px 12px #007aff4d;cursor:pointer;transition:all .2s ease;z-index:100}.fab-compact[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 16px #007aff66}.fab-compact[_ngcontent-%COMP%]:active{transform:scale(1.05)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media(max-width:768px){.categories-grid-compact[_ngcontent-%COMP%]{grid-template-columns:1fr}.fab-compact[_ngcontent-%COMP%]{bottom:16px;right:16px;width:48px;height:48px}}"]})};var De=(n,i)=>i.value;function Fe(n,i){if(n&1&&(t(0,"div",5)(1,"span",25),c(2,"\u26A0\uFE0F"),a(),t(3,"span"),c(4),a()()),n&2){let e=s();r(4),u(e.error())}}function Ie(n,i){if(n&1&&(t(0,"option",11),c(1),a()),n&2){let e=i.$implicit;f("value",e),r(),u(e)}}function ze(n,i){if(n&1&&(t(0,"span",12),c(1),a()),n&2){let e=s();r(),u(e.getErrorMessage("bankName"))}}function Ne(n,i){if(n&1&&(t(0,"option",11),c(1),a()),n&2){let e=i.$implicit;f("value",e.value),r(),u(e.label)}}function Ve(n,i){if(n&1&&(t(0,"span",12),c(1),a()),n&2){let e=s();r(),u(e.getErrorMessage("accountType"))}}function Ae(n,i){if(n&1&&(t(0,"span",12),c(1),a()),n&2){let e=s();r(),u(e.getErrorMessage("alias"))}}function je(n,i){if(n&1&&(t(0,"span",12),c(1),a()),n&2){let e=s(2);r(),u(e.getErrorMessage("cutDay"))}}function Be(n,i){if(n&1&&(t(0,"span",12),c(1),a()),n&2){let e=s(2);r(),u(e.getErrorMessage("paymentDay"))}}function Le(n,i){if(n&1&&(t(0,"div",19)(1,"div",6)(2,"label",26),c(3," D\xEDa de Corte "),t(4,"span",8),c(5,"*"),a()(),m(6,"input",27),p(7,je,2,1,"span",12),a(),t(8,"div",6)(9,"label",28),c(10," D\xEDa de Pago "),t(11,"span",8),c(12,"*"),a()(),m(13,"input",29),p(14,Be,2,1,"span",12),a()()),n&2){let e=s();r(6),h("error",e.hasError("cutDay")),r(),g(e.hasError("cutDay")?7:-1),r(6),h("error",e.hasError("paymentDay")),r(),g(e.hasError("paymentDay")?14:-1)}}function qe(n,i){n&1&&(m(0,"span",30),c(1," Guardando... "))}function $e(n,i){if(n&1&&c(0),n&2){let e=s();O(" ",e.isEditing?"Actualizar":"Crear"," ")}}var K=class n{fb=M($);paymentMethodService=M(Y);authService=M(w);paymentMethod=null;save=new T;cancel=new T;form;submitting=b(!1);error=b(null);banks=["BBVA","Santander","HSBC","Banamex","Banorte","ScotiaBank","Inbursa","Azteca","BanBajio","BanRegio","Otro"];accountTypes=[{value:"CREDIT",label:"Cr\xE9dito"},{value:"DEBIT",label:"D\xE9bito"},{value:"DIGITAL",label:"Tarjeta Digital"},{value:"CASH",label:"Efectivo"}];ngOnInit(){this.initForm(),this.setupAccountTypeListener()}initForm(){let i=!this.paymentMethod||this.paymentMethod.accountType==="CREDIT";this.form=this.fb.group({bankName:[this.paymentMethod?.bankName||"",[C.required]],accountType:[this.paymentMethod?.accountType||"CREDIT",[C.required]],cutDay:[{value:this.paymentMethod?.cutDay||1,disabled:!i},i?[C.required,C.min(1),C.max(31)]:[]],paymentDay:[{value:this.paymentMethod?.paymentDay||1,disabled:!i},i?[C.required,C.min(1),C.max(31)]:[]],alias:[this.paymentMethod?.alias||"",[C.maxLength(50)]]})}setupAccountTypeListener(){this.form.get("accountType")?.valueChanges.subscribe(i=>{let e=this.form.get("cutDay"),o=this.form.get("paymentDay");i==="CREDIT"?(e?.enable(),o?.enable(),e?.setValidators([C.required,C.min(1),C.max(31)]),o?.setValidators([C.required,C.min(1),C.max(31)])):(e?.disable(),o?.disable(),e?.clearValidators(),o?.clearValidators(),e?.setValue(null),o?.setValue(null)),e?.updateValueAndValidity(),o?.updateValueAndValidity()})}get isCreditCard(){return this.form.get("accountType")?.value==="CREDIT"}get isEditing(){return this.paymentMethod!==null}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}let e=this.authService.currentUser()?.id;if(!e){this.error.set("No se pudo obtener el ID del usuario");return}this.submitting.set(!0),this.error.set(null);let o=this.form.value.accountType,d=o==="CREDIT",_={userId:e,bankName:this.form.value.bankName,accountType:o,cutDay:d?parseInt(this.form.get("cutDay")?.value):1,paymentDay:d?parseInt(this.form.get("paymentDay")?.value):1,alias:this.form.value.alias||void 0};(this.isEditing?this.paymentMethodService.updatePaymentMethod(this.paymentMethod.id,_):this.paymentMethodService.createPaymentMethod(_)).subscribe({next:()=>{this.submitting.set(!1),this.save.emit()},error:X=>{this.submitting.set(!1),this.error.set(X.error?.message||"Error al guardar el m\xE9todo de pago")}})}onCancel(){this.cancel.emit()}hasError(i){let e=this.form.get(i);return!!(e&&e.invalid&&(e.dirty||e.touched))}getErrorMessage(i){let e=this.form.get(i);return e?e.hasError("required")?"Este campo es requerido":e.hasError("min")?`Valor m\xEDnimo: ${e.errors?.min.min}`:e.hasError("max")?`Valor m\xE1ximo: ${e.errors?.max.max}`:e.hasError("maxlength")?`M\xE1ximo ${e.errors?.maxlength.requiredLength} caracteres`:"":""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-payment-method-form"]],inputs:{paymentMethod:"paymentMethod"},outputs:{save:"save",cancel:"cancel"},decls:51,vars:16,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content","glass-modal",3,"click"],[1,"modal-header"],["title","Cerrar",1,"btn-close",3,"click"],[3,"ngSubmit","formGroup"],[1,"alert","alert-error"],[1,"form-group"],["for","bankName",1,"form-label"],[1,"required"],["id","bankName","formControlName","bankName",1,"form-select"],["value","","disabled",""],[3,"value"],[1,"error-message"],["for","accountType",1,"form-label"],["id","accountType","formControlName","accountType",1,"form-select"],["for","alias",1,"form-label"],[1,"optional"],["type","text","id","alias","formControlName","alias","placeholder","ej: Visa personal, Tarjeta n\xF3mina","maxlength","50",1,"form-input"],[1,"form-hint"],[1,"form-row"],[1,"info-note"],[1,"info-icon"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert-icon"],["for","cutDay",1,"form-label"],["type","number","id","cutDay","formControlName","cutDay","placeholder","1-31","min","1","max","31",1,"form-input"],["for","paymentDay",1,"form-label"],["type","number","id","paymentDay","formControlName","paymentDay","placeholder","1-31","min","1","max","31",1,"form-input"],[1,"spinner-small"]],template:function(e,o){e&1&&(t(0,"div",0),l("click",function(){return o.onCancel()}),t(1,"div",1),l("click",function(_){return _.stopPropagation()}),t(2,"header",2)(3,"h2"),c(4),a(),t(5,"button",3),l("click",function(){return o.onCancel()}),t(6,"span"),c(7,"\u2715"),a()()(),t(8,"form",4),l("ngSubmit",function(){return o.onSubmit()}),p(9,Fe,5,1,"div",5),t(10,"div",6)(11,"label",7),c(12," Banco "),t(13,"span",8),c(14,"*"),a()(),t(15,"select",9)(16,"option",10),c(17,"Selecciona un banco"),a(),k(18,Ie,2,2,"option",11,ne),a(),p(20,ze,2,1,"span",12),a(),t(21,"div",6)(22,"label",13),c(23," Tipo de Cuenta "),t(24,"span",8),c(25,"*"),a()(),t(26,"select",14),k(27,Ne,2,2,"option",11,De),a(),p(29,Ve,2,1,"span",12),a(),t(30,"div",6)(31,"label",15),c(32," Alias "),t(33,"span",16),c(34,"(opcional)"),a()(),m(35,"input",17),t(36,"small",18),c(37,"Dale un nombre personalizado para identificarla f\xE1cilmente"),a(),p(38,Ae,2,1,"span",12),a(),p(39,Le,15,6,"div",19),t(40,"div",20)(41,"span",21),c(42,"\u2139\uFE0F"),a(),t(43,"p"),c(44,"Los d\xEDas de corte y pago son importantes para calcular tus per\xEDodos de facturaci\xF3n y MSI."),a()(),t(45,"div",22)(46,"button",23),l("click",function(){return o.onCancel()}),c(47," Cancelar "),a(),t(48,"button",24),p(49,qe,2,0)(50,$e,1,1),a()()()()()),e&2&&(r(4),u(o.isEditing?"Editar Tarjeta":"Nueva Tarjeta"),r(4),f("formGroup",o.form),r(),g(o.error()?9:-1),r(6),h("error",o.hasError("bankName")),r(3),S(o.banks),r(2),g(o.hasError("bankName")?20:-1),r(6),h("error",o.hasError("accountType")),r(),S(o.accountTypes),r(2),g(o.hasError("accountType")?29:-1),r(6),h("error",o.hasError("alias")),r(3),g(o.hasError("alias")?38:-1),r(),g(o.isCreditCard?39:-1),r(7),f("disabled",o.submitting()),r(2),f("disabled",o.submitting()||o.form.invalid),r(),g(o.submitting()?49:50))},dependencies:[E,R,B,se,le,V,ce,de,A,j,ge,pe,me,q,L],styles:[`.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out;padding:1rem}.modal-content[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d,0 4px 16px #0000001a;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1);overflow:hidden}.glass-modal[_ngcontent-%COMP%]{background:#fffffff2;backdrop-filter:blur(40px);-webkit-backdrop-filter:blur(40px);border:1px solid rgba(255,255,255,.18)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem 2rem;border-bottom:1px solid rgba(0,0,0,.06)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1d1d1f;margin:0;letter-spacing:-.02em}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#0000000a;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;font-size:1.25rem;color:#6e6e73}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#00000014;color:#1d1d1f}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:active{transform:scale(.95)}form[_ngcontent-%COMP%]{padding:2rem}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;border-radius:12px;margin-bottom:1.5rem;font-size:.9375rem}.alert.alert-error[_ngcontent-%COMP%]{background:#ff3b301a;color:#ff3b30;border:1px solid rgba(255,59,48,.2)}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{font-size:1.25rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.9375rem;font-weight:600;color:#1d1d1f;margin-bottom:.5rem}.form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ff3b30;margin-left:.25rem}.form-label[_ngcontent-%COMP%]   .optional[_ngcontent-%COMP%]{font-weight:400;color:#6e6e73;font-size:.875rem;margin-left:.25rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:.9375rem;color:#1d1d1f;background:#f5f5f7;border:2px solid rgba(0,0,0,.06);border-radius:12px;transition:all .2s ease;font-family:inherit;outline:none}.form-input[_ngcontent-%COMP%]::placeholder, .form-select[_ngcontent-%COMP%]::placeholder{color:#8e8e93}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007aff;background:#fff;box-shadow:0 0 0 4px #007aff1a}.form-input.error[_ngcontent-%COMP%], .form-select.error[_ngcontent-%COMP%]{border-color:#ff3b30}.form-input.error[_ngcontent-%COMP%]:focus, .form-select.error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #ff3b301a}.form-input[_ngcontent-%COMP%]:disabled, .form-select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.form-select[_ngcontent-%COMP%]{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 1rem center;padding-right:3rem}.error-message[_ngcontent-%COMP%]{display:block;font-size:.8125rem;color:#ff3b30;margin-top:.375rem;font-weight:500}.form-hint[_ngcontent-%COMP%]{display:block;font-size:.8125rem;color:#6e6e73;margin-top:.375rem;font-style:italic}.info-note[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1rem 1.25rem;background:#007aff14;border-radius:12px;margin-top:1.5rem}.info-note[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1.25rem;flex-shrink:0}.info-note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#6e6e73;margin:0;line-height:1.5}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;padding-top:1.5rem;margin-top:1.5rem;border-top:1px solid rgba(0,0,0,.06)}.btn[_ngcontent-%COMP%]{flex:1;padding:.875rem 1.5rem;font-size:.9375rem;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn[_ngcontent-%COMP%]:not(:disabled):active{transform:scale(.98)}.btn-secondary[_ngcontent-%COMP%]{background:#0000000a;color:#1d1d1f}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#00000014}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007aff,#0051d5);color:#fff;box-shadow:0 4px 12px #007aff4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #007aff66;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media(max-width:768px){.modal-content[_ngcontent-%COMP%]{max-width:calc(100% - 2rem)}.modal-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}form[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}.modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}`]})};var Re=(n,i)=>i.id;function Ye(n,i){n&1&&(t(0,"div",1),m(1,"div",6),t(2,"p"),c(3,"Cargando tarjetas..."),a()())}function Ge(n,i){if(n&1){let e=v();t(0,"div",2)(1,"div",7),c(2,"\u{1F4B3}"),a(),t(3,"h3"),c(4,"Sin tarjetas registradas"),a(),t(5,"p"),c(6,"Agrega tus tarjetas bancarias para gestionar tus pagos"),a(),t(7,"div",8)(8,"button",9),l("click",function(){x(e);let d=s();return y(d.openCreateForm())}),t(9,"span",10),c(10,"+"),a(),c(11," Agregar Tarjeta "),a(),t(12,"button",11),l("click",function(){x(e);let d=s();return y(d.createPredefinedOptions())}),t(13,"span",10),c(14,"\u26A1"),a(),c(15," Opciones Predefinidas "),a()()()}}function Ue(n,i){if(n&1&&(t(0,"div",25),c(1),a()),n&2){let e=s().$implicit;r(),u(e.alias)}}function He(n,i){if(n&1){let e=v();t(0,"div",13)(1,"div",14),ee(),t(2,"svg",15),m(3,"rect",16),t(4,"defs")(5,"linearGradient",17),m(6,"stop",18)(7,"stop",19),a()()()(),te(),t(8,"div",20)(9,"button",21),l("click",function(){let d=x(e).$implicit,_=s(2);return y(_.editPaymentMethod(d))}),m(10,"lucide-icon",22),a(),t(11,"button",23),l("click",function(){let d=x(e).$implicit,_=s(2);return y(_.deletePaymentMethod(d))}),t(12,"span"),c(13,"\u{1F5D1}\uFE0F"),a()()(),t(14,"div",24),p(15,Ue,2,1,"div",25),t(16,"div",26),c(17,"\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022"),a(),t(18,"div",27)(19,"div",28)(20,"span",29),c(21,"Banco"),a(),t(22,"span",30),c(23),a()(),t(24,"div",31)(25,"span",29),c(26,"Tipo"),a(),t(27,"span",30),c(28),a()()()(),t(29,"div",32)(30,"div",33)(31,"div",34)(32,"span",35),c(33,"Corte"),a(),t(34,"span",36),c(35),a()(),t(36,"div",34)(37,"span",35),c(38,"Pago"),a(),t(39,"span",36),c(40),a()()(),t(41,"div",37)(42,"span",38),c(43),a()()()()}if(n&2){let e=i.$implicit,o=s(2);oe("background",o.getBankColor(e.bankName)),r(10),f("img",o.Edit2)("size",16),r(5),g(e.alias?15:-1),r(8),u(e.bankName),r(5),u(e.accountType),r(7),O("D\xEDa ",e.cutDay),r(5),O("D\xEDa ",e.paymentDay),r(2),h("active",e.isActive),r(),O(" ",e.isActive?"\u2713":"\u2715"," ")}}function Je(n,i){if(n&1&&(t(0,"div",3),k(1,He,44,12,"div",12,Re),a()),n&2){let e=s();r(),S(e.paymentMethods())}}function Ke(n,i){if(n&1){let e=v();t(0,"button",39),l("click",function(){x(e);let d=s();return y(d.openCreateForm())}),t(1,"span",40),c(2,"+"),a()()}}function Qe(n,i){if(n&1){let e=v();t(0,"app-payment-method-form",41),l("save",function(){x(e);let d=s();return y(d.handleFormSave())})("cancel",function(){x(e);let d=s();return y(d.closeForm())}),a()}if(n&2){let e=s();f("paymentMethod",e.selectedPaymentMethod())}}var Q=class n{Edit2=z;paymentMethodService=M(Y);authService=M(w);paymentMethods=b([]);loading=b(!1);showForm=b(!1);selectedPaymentMethod=b(null);ngOnInit(){this.loadPaymentMethods()}loadPaymentMethods(){let i=this.authService.getTenantId();if(console.log("\u{1F50D} TenantId para payment methods:",i),!i){console.error("\u274C No hay tenantId");return}this.loading.set(!0),console.log("\u{1F504} Cargando payment methods..."),this.paymentMethodService.getByTenant(i,0,50).subscribe({next:e=>{console.log("\u2705 Payment methods cargados:",e),this.paymentMethods.set(e.content),this.loading.set(!1)},error:e=>{console.error("\u274C Error loading payment methods:",e),this.loading.set(!1)}})}openCreateForm(){this.selectedPaymentMethod.set(null),this.showForm.set(!0)}createPredefinedOptions(){let i=this.authService.currentUser()?.id,e=this.authService.getTenantId();if(!i||!e){console.error("\u274C No hay userId o tenantId");return}let o=[{bankName:"Efectivo",accountType:"CASH",cutDay:1,paymentDay:1},{bankName:"Nu",accountType:"CREDIT",cutDay:1,paymentDay:10},{bankName:"Rappi",accountType:"CREDIT",cutDay:15,paymentDay:25},{bankName:"BBVA",accountType:"CREDIT",cutDay:5,paymentDay:20},{bankName:"Santander",accountType:"CREDIT",cutDay:10,paymentDay:25},{bankName:"Citibanamex",accountType:"CREDIT",cutDay:15,paymentDay:28}];this.loading.set(!0);let d=0,_=0;o.forEach((W,X)=>{let Ce=Z({userId:i,tenantId:e},W);this.paymentMethodService.createPaymentMethod(Ce).subscribe({next:()=>{d++,d+_===o.length&&(this.loading.set(!1),console.log(`\u2705 Creados ${d} m\xE9todos de pago predefinidos`),this.loadPaymentMethods())},error:_e=>{_++,console.error(`\u274C Error creando ${W.bankName}:`,_e),d+_===o.length&&(this.loading.set(!1),this.loadPaymentMethods())}})})}editPaymentMethod(i){this.selectedPaymentMethod.set(i),this.showForm.set(!0)}deletePaymentMethod(i){confirm(`\xBFEliminar la tarjeta "${i.bankName}"?`)&&this.paymentMethodService.deletePaymentMethod(i.id).subscribe({next:()=>{this.loadPaymentMethods()},error:e=>{console.error("Error deleting payment method:",e)}})}handleFormSave(){this.showForm.set(!1),this.loadPaymentMethods()}closeForm(){this.showForm.set(!1),this.selectedPaymentMethod.set(null)}getBankColor(i){let e={BBVA:"linear-gradient(135deg, #004481 0%, #0059A3 100%)",Santander:"linear-gradient(135deg, #EC0000 0%, #C40000 100%)",HSBC:"linear-gradient(135deg, #DB0011 0%, #B00010 100%)",Banamex:"linear-gradient(135deg, #002E6D 0%, #004B8D 100%)",Banorte:"linear-gradient(135deg, #ED1C24 0%, #C4161D 100%)",ScotiaBank:"linear-gradient(135deg, #ED1B2E 0%, #C41628 100%)",Inbursa:"linear-gradient(135deg, #003DA5 0%, #0052D9 100%)",default:"linear-gradient(135deg, #667EEA 0%, #764BA2 100%)"};return e[i]||e.default}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-payment-methods-tab"]],decls:6,vars:3,consts:[[1,"payment-methods-tab"],[1,"loading-container"],[1,"empty-state"],[1,"cards-grid"],["title","Agregar tarjeta",1,"fab"],[3,"paymentMethod"],[1,"spinner"],[1,"empty-icon"],[1,"button-group"],[1,"btn-primary",3,"click"],[1,"icon"],[1,"btn-secondary",3,"click"],[1,"credit-card",3,"background"],[1,"credit-card"],[1,"card-chip"],["width","40","height","32","viewBox","0 0 40 32","fill","none"],["width","40","height","32","rx","4","fill","url(#chip-gradient)"],["id","chip-gradient","x1","0","y1","0","x2","40","y2","32"],["offset","0%","stop-color","#FFD700"],["offset","100%","stop-color","#FFA500"],[1,"card-actions"],["title","Editar",1,"btn-card-icon",3,"click"],[3,"img","size"],["title","Eliminar",1,"btn-card-icon",3,"click"],[1,"card-body"],[1,"card-alias"],[1,"card-number"],[1,"card-info"],[1,"card-holder"],[1,"label"],[1,"value"],[1,"card-type"],[1,"card-footer"],[1,"payment-info"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"card-status"],[1,"status-badge"],["title","Agregar tarjeta",1,"fab",3,"click"],[1,"fab-icon"],[3,"save","cancel","paymentMethod"]],template:function(e,o){e&1&&(t(0,"div",0),p(1,Ye,4,0,"div",1)(2,Ge,16,0,"div",2)(3,Je,3,0,"div",3),p(4,Ke,3,0,"button",4),p(5,Qe,1,1,"app-payment-method-form",5),a()),e&2&&(r(),g(o.loading()?1:o.paymentMethods().length===0?2:3),r(3),g(o.paymentMethods().length>0&&!o.loading()?4:-1),r(),g(o.showForm()?5:-1))},dependencies:[E,K,F,D],styles:['.payment-methods-tab[_ngcontent-%COMP%]{position:relative;min-height:400px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:#6e6e73}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(0,122,255,.1);border-top-color:#007aff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;font-size:.9375rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1d1d1f;margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9375rem;color:#6e6e73;margin:0 0 2rem;max-width:400px}.empty-state[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.875rem 1.75rem;color:#fff;border:none;border-radius:12px;font-size:.9375rem;font-weight:600;cursor:pointer;transition:all .3s ease}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover, .empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active, .empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0)}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007aff,#0051d5);box-shadow:0 4px 12px #007aff4d}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #007aff66}.empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#af52de,#8e44ad);box-shadow:0 4px 12px #8e44ad4d}.empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #8e44ad66}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(360px,1fr));gap:2rem;animation:_ngcontent-%COMP%_fadeIn .4s ease-out}.credit-card[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:1.586;padding:1.75rem;border-radius:20px;color:#fff;box-shadow:0 10px 40px #0003,0 2px 8px #0000001a,inset 0 1px #fff3;transition:all .4s cubic-bezier(.4,0,.2,1);cursor:pointer;overflow:hidden}.credit-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.15) 0%,transparent 60%);pointer-events:none}.credit-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 60px #0000004d,0 4px 16px #00000026,inset 0 1px #ffffff40}.credit-card[_ngcontent-%COMP%]   .card-chip[_ngcontent-%COMP%]{margin-bottom:1.5rem;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.credit-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{position:absolute;top:1.75rem;right:1.75rem;display:flex;gap:.5rem;opacity:0;transition:opacity .3s ease}.credit-card[_ngcontent-%COMP%]:hover   .card-actions[_ngcontent-%COMP%]{opacity:1}.credit-card[_ngcontent-%COMP%]   .btn-card-icon[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3);border-radius:10px;cursor:pointer;transition:all .2s ease;font-size:.875rem}.credit-card[_ngcontent-%COMP%]   .btn-card-icon[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.credit-card[_ngcontent-%COMP%]   .btn-card-icon[_ngcontent-%COMP%]:active{transform:scale(.95)}.credit-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.credit-card[_ngcontent-%COMP%]   .card-alias[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;letter-spacing:.02em;text-shadow:0 2px 4px rgba(0,0,0,.2);margin-bottom:-.5rem;opacity:.95}.credit-card[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;letter-spacing:.15em;text-shadow:0 2px 4px rgba(0,0,0,.2);font-family:SF Mono,Courier New,monospace}.credit-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{display:flex;gap:2rem}.credit-card[_ngcontent-%COMP%]   .card-holder[_ngcontent-%COMP%], .credit-card[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.credit-card[_ngcontent-%COMP%]   .card-holder[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .credit-card[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.6875rem;text-transform:uppercase;letter-spacing:.08em;opacity:.8;font-weight:500}.credit-card[_ngcontent-%COMP%]   .card-holder[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .credit-card[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.2)}.credit-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{position:absolute;bottom:1.75rem;left:1.75rem;right:1.75rem;display:flex;justify-content:space-between;align-items:flex-end}.credit-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.credit-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.credit-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.625rem;text-transform:uppercase;letter-spacing:.08em;opacity:.8;font-weight:500}.credit-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.2)}.credit-card[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3);border-radius:50%;font-size:.875rem;font-weight:600}.credit-card[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#34c7594d;border-color:#34c75980}.credit-card[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]:not(.active){background:#ff3b304d;border-color:#ff3b3080}.fab[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;width:64px;height:64px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#007aff,#0051d5);border:none;border-radius:50%;box-shadow:0 8px 24px #007aff66,0 2px 8px #0000001f;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:100}.fab[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;color:#fff;line-height:1}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1) rotate(90deg);box-shadow:0 12px 32px #007aff80,0 4px 12px #00000029}.fab[_ngcontent-%COMP%]:active{transform:scale(1.05) rotate(90deg)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_shimmer{0%,to{opacity:1}50%{opacity:.8}}@media(max-width:768px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fab[_ngcontent-%COMP%]{bottom:1.5rem;right:1.5rem;width:56px;height:56px}.fab[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%]{font-size:1.75rem}}']})};function We(n,i){n&1&&m(0,"app-categories-tab")}function Xe(n,i){n&1&&m(0,"app-payment-methods-tab")}var ue=class n{activeTab=b("categories");Folder=I;CreditCard=ie;switchTab(i){this.activeTab.set(i)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-settings"]],decls:20,vars:11,consts:[[1,"settings-container"],[1,"settings-header"],[1,"subtitle"],[1,"tabs-container"],[1,"tab-selector"],[1,"tab-button",3,"click"],[3,"img","size"],[1,"tab-label"],[1,"tab-indicator"],[1,"tab-content"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"header",1)(2,"h1"),c(3,"Ajustes"),a(),t(4,"p",2),c(5,"Gestiona categor\xEDas y m\xE9todos de pago"),a()(),t(6,"div",3)(7,"div",4)(8,"button",5),l("click",function(){return o.switchTab("categories")}),m(9,"lucide-icon",6),t(10,"span",7),c(11,"Categor\xEDas"),a()(),t(12,"button",5),l("click",function(){return o.switchTab("payment-methods")}),m(13,"lucide-icon",6),t(14,"span",7),c(15,"M\xE9todos de Pago"),a()(),m(16,"div",8),a()(),t(17,"div",9),p(18,We,1,0,"app-categories-tab")(19,Xe,1,0,"app-payment-methods-tab"),a()()),e&2&&(r(8),h("active",o.activeTab()==="categories"),r(),f("img",o.Folder)("size",18),r(3),h("active",o.activeTab()==="payment-methods"),r(),f("img",o.CreditCard)("size",18),r(3),h("right",o.activeTab()==="payment-methods"),r(2),g(o.activeTab()==="categories"?18:19))},dependencies:[E,J,Q,F,D],styles:[".settings-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto;animation:_ngcontent-%COMP%_fadeIn .4s ease-out}.settings-header[_ngcontent-%COMP%]{margin-bottom:2rem}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1d1d1f;margin:0 0 .5rem;letter-spacing:-.02em}.settings-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#6e6e73;margin:0}.tabs-container[_ngcontent-%COMP%]{margin-bottom:2rem}.tab-selector[_ngcontent-%COMP%]{position:relative;display:flex;background:#ffffffd9;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:14px;padding:4px;box-shadow:0 2px 8px #0000000a;border:1px solid rgba(255,255,255,.18)}.tab-button[_ngcontent-%COMP%]{position:relative;flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1.5rem;background:transparent;border:none;border-radius:10px;font-size:.9375rem;font-weight:600;color:#6e6e73;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:2}.tab-button[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]{transition:transform .3s ease;color:inherit}.tab-button[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{transition:color .3s ease}.tab-button[_ngcontent-%COMP%]:hover{color:#1d1d1f}.tab-button[_ngcontent-%COMP%]:hover   lucide-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.tab-button.active[_ngcontent-%COMP%]{color:#007aff}.tab-button.active[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]{transform:scale(1.15)}.tab-indicator[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;width:calc(50% - 4px);height:calc(100% - 8px);background:#fff;border-radius:10px;box-shadow:0 2px 8px #00000014,0 1px 2px #0000000a;transition:transform .3s cubic-bezier(.4,0,.2,1);z-index:1}.tab-indicator.right[_ngcontent-%COMP%]{transform:translate(calc(100% + 4px))}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-10px)}to{opacity:1;transform:translate(0)}}@media(max-width:768px){.settings-container[_ngcontent-%COMP%]{padding:1rem}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.tab-button[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem;padding:.75rem 1rem}.tab-button[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]{width:20px;height:20px}.tab-button[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{font-size:.75rem}}"]})};export{ue as SettingsComponent};
