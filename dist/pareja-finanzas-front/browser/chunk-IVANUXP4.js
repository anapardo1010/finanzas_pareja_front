import{a as vt}from"./chunk-MD7C4E5P.js";import{a as gt}from"./chunk-TFD25M2I.js";import{a as ut}from"./chunk-MTDW43NY.js";import{a as Et}from"./chunk-DVSV6Z42.js";import{B as dt,C as mt,D as pt,a as tt,c as et,f as nt,g as ot,h as it,j as at,l as rt,n as st,s as ct,u as lt}from"./chunk-QWECJNWK.js";import{a as ft,b as _t,c as C,d as Ct,e as bt,h as Mt,i as Pt,j as ht,k as yt,l as xt,m as k,n as R,p as Ot,s as Tt,u as A}from"./chunk-EFCWVEXT.js";import{h as Z}from"./chunk-3SXPRKRB.js";import{$a as i,Ab as H,Bb as E,Db as M,Ka as S,Oa as x,Q as h,V as T,Va as I,Vb as J,W as v,Wa as N,Wb as K,Xa as F,Xb as Q,Ya as w,Za as d,Zb as W,_a as o,_b as D,ab as b,ba as z,fa as u,fb as U,gb as g,ha as q,hb as _,ob as B,pb as m,qb as a,rb as f,sb as L,tb as Y,xa as r,xb as p,zb as O}from"./chunk-VKFMD7IK.js";function Dt(s,e){if(s&1&&(o(0,"option",23),a(1),i()),s&2){let t=e.$implicit;d("value",t.id),r(),f(t.alias||t.bankName)}}function kt(s,e){s&1&&(o(0,"label"),a(1,"Categor\xEDa"),i())}function Rt(s,e){if(s&1&&(o(0,"option",23),a(1),i()),s&2){let t=e.$implicit;d("value",t.id),r(),f(t.name)}}function At(s,e){if(s&1&&(o(0,"select",24),x(1,Rt,2,2,"option",7),i()),s&2){let t=_();r(),d("ngForOf",t.categories)}}function Vt(s,e){s&1&&(o(0,"label"),a(1,"Destino"),i())}function zt(s,e){if(s&1&&(o(0,"option",23),a(1),i()),s&2){let t=e.$implicit;d("value",t.id),r(),f(t.alias||t.bankName)}}function Ut(s,e){if(s&1&&(o(0,"select",25),x(1,zt,2,2,"option",7),i()),s&2){let t=_();r(),d("ngForOf",t.paymentMethods)}}function Lt(s,e){s&1&&(o(0,"div",16),b(1,"input",26),o(2,"span"),a(3,"MSI"),i()())}function Xt(s,e){s&1&&(o(0,"label"),a(1,"Total MSI"),i())}function Gt(s,e){s&1&&b(0,"input",27)}var V=class s{form;type;transaction;categories=[];paymentMethods=[];users=[];submitting=!1;submit=new z;close=new z;getTitle(){return{EXPENSE:"Gasto",INCOME:"Ingreso",CREDIT_PAYMENT:"Pago de Tarjeta",TRANSFER:"Transferencia"}[this.type]||"Transacci\xF3n"}onSubmit(){this.form.valid&&this.submit.emit()}onClose(){this.close.emit()}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=S({type:s,selectors:[["app-transaction-form"]],inputs:{form:"form",type:"type",transaction:"transaction",categories:"categories",paymentMethods:"paymentMethods",users:"users",submitting:"submitting"},outputs:{submit:"submit",close:"close"},decls:45,vars:11,consts:[[1,"transaction-form-modal"],[1,"modal-content"],[3,"ngSubmit","formGroup"],["formControlName","description","type","text","placeholder","Descripci\xF3n"],["formControlName","amount","type","number","min","0.01","step","0.01"],["formControlName","date","type","date"],["formControlName","paymentMethodId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","transactionType"],["value","EXPENSE"],["value","INCOME"],["value","CREDIT_PAYMENT"],["value","TRANSFER"],[4,"ngIf"],["formControlName","categoryId",4,"ngIf"],["formControlName","destinationPaymentMethodId",4,"ngIf"],[1,"checkbox-label"],["type","checkbox","formControlName","isShared"],["class","checkbox-label",4,"ngIf"],["type","number","formControlName","totalInstallments","min","1",4,"ngIf"],[1,"modal-actions"],["type","button",3,"click"],["type","submit",3,"disabled"],[3,"value"],["formControlName","categoryId"],["formControlName","destinationPaymentMethodId"],["type","checkbox","formControlName","hasInstallments"],["type","number","formControlName","totalInstallments","min","1"]],template:function(t,n){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),a(3),i(),o(4,"form",2),g("ngSubmit",function(){return n.onSubmit()}),o(5,"label"),a(6,"Descripci\xF3n"),i(),b(7,"input",3),o(8,"label"),a(9,"Monto"),i(),b(10,"input",4),o(11,"label"),a(12,"Fecha"),i(),b(13,"input",5),o(14,"label"),a(15,"M\xE9todo de Pago"),i(),o(16,"select",6),x(17,Dt,2,2,"option",7),i(),o(18,"label"),a(19,"Tipo"),i(),o(20,"select",8)(21,"option",9),a(22,"Gasto"),i(),o(23,"option",10),a(24,"Ingreso"),i(),o(25,"option",11),a(26,"Pago TC"),i(),o(27,"option",12),a(28,"Transferencia"),i()(),x(29,kt,2,0,"label",13)(30,At,2,1,"select",14)(31,Vt,2,0,"label",13)(32,Ut,2,1,"select",15),o(33,"div",16),b(34,"input",17),o(35,"span"),a(36,"Compartido"),i()(),x(37,Lt,4,0,"div",18)(38,Xt,2,0,"label",13)(39,Gt,1,0,"input",19),o(40,"div",20)(41,"button",21),g("click",function(){return n.onClose()}),a(42,"Cancelar"),i(),o(43,"button",22),a(44,"Guardar"),i()()()()()),t&2){let c,l,P,y,G,$,j;r(3),f(n.transaction?"Editar Transacci\xF3n":"Nueva Transacci\xF3n"),r(),d("formGroup",n.form),r(13),d("ngForOf",n.paymentMethods),r(12),d("ngIf",(c=n.form.get("categoryId"))==null?null:c.enabled),r(),d("ngIf",(l=n.form.get("categoryId"))==null?null:l.enabled),r(),d("ngIf",(P=n.form.get("destinationPaymentMethodId"))==null?null:P.enabled),r(),d("ngIf",(y=n.form.get("destinationPaymentMethodId"))==null?null:y.enabled),r(5),d("ngIf",(G=n.form.get("hasInstallments"))==null?null:G.enabled),r(),d("ngIf",($=n.form.get("totalInstallments"))==null?null:$.enabled),r(),d("ngIf",(j=n.form.get("totalInstallments"))==null?null:j.enabled),r(4),d("disabled",n.form.invalid||n.submitting)}},dependencies:[D,J,K,A,Mt,k,R,_t,Pt,ft,xt,Ct,bt,Ot,yt,ht],styles:[".transaction-form-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000026;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;min-width:320px;max-width:400px;box-shadow:0 4px 16px #0000001f;font-size:15px}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin-bottom:16px;color:#1e293b}.amount-field[_ngcontent-%COMP%]{margin-bottom:24px;text-align:center}.amount-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:700;color:#94a3b8;text-transform:uppercase;margin-bottom:4px}.amount-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.amount-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#4f46e5;margin-right:4px}.amount-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:42px;font-weight:800;border:none;padding:0;width:200px;text-align:left}.amount-field[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-grid[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{grid-column:span 2}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#64748b;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;padding:6px 10px;border-radius:8px;border:1px solid #cbd5e1;font-size:14px;background:#fff;color:#334155}.extra-options[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.checkbox-card[_ngcontent-%COMP%]{flex:1;position:relative;cursor:pointer}.checkbox-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0}.checkbox-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:12px;border:1px solid #e2e8f0;border-radius:12px;transition:.2s}.checkbox-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:700;color:#1e293b}.checkbox-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:11px;color:#94a3b8}.checkbox-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .card-content[_ngcontent-%COMP%]{background:#f5f3ff;border-color:#4f46e5}.checkbox-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .card-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#4f46e5}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:10px;font-size:13px;color:#475569}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:18px}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 14px;border-radius:8px;border:none;font-weight:600;cursor:pointer;background:#4f46e5;color:#fff;font-size:14px}.modal-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b;border:none}.modal-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]:hover{background:#e2e8f0}.modal-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:none}.modal-actions[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:hover{background:#4338ca}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;padding:6px 10px;border-radius:8px;border:1px solid #cbd5e1;font-size:14px;background:#fff;color:#334155;box-shadow:none}input[_ngcontent-%COMP%]::placeholder{color:#94a3b8;opacity:1}label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#475569;margin-bottom:2px;display:block}input[type=checkbox][_ngcontent-%COMP%]{accent-color:#4f46e5;width:18px;height:18px;margin-right:6px;vertical-align:middle}button[_ngcontent-%COMP%]{padding:6px 14px;border-radius:8px;border:none;font-weight:600;cursor:pointer;background:#4f46e5;color:#fff;font-size:14px}button[type=button][_ngcontent-%COMP%]{background:#e2e8f0;color:#1e293b}button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}"]})};var X=(s,e)=>e.id;function $t(s,e){if(s&1&&(o(0,"option",23),a(1),i()),s&2){let t=e.$implicit;d("value",t.id),r(),f(t.name)}}function jt(s,e){if(s&1&&(o(0,"option",23),a(1),i()),s&2){let t=e.$implicit;d("value",t.id),r(),f(t.alias||t.bankName)}}function qt(s,e){if(s&1&&(o(0,"span"),a(1,"COMPARTIDO"),i()),s&2){let t=_().$implicit;m(p("badge-shared ",t.transactionType.toLowerCase()))}}function Bt(s,e){if(s&1&&(o(0,"span"),a(1,"MSI"),i()),s&2){let t=_().$implicit;m(p("badge-shared ",t.transactionType.toLowerCase()))}}function Yt(s,e){if(s&1){let t=U();o(0,"div",34),g("click",function(){let c=T(t).$implicit,l=_();return v(l.editTransaction(c))}),o(1,"div")(2,"div")(3,"span",35),a(4),i()(),o(5,"div")(6,"span"),a(7),i(),o(8,"div")(9,"span"),a(10),i(),o(11,"span",36),a(12,"/"),i(),o(13,"span"),a(14),O(15,"date"),i(),o(16,"span",36),a(17,"/"),i(),o(18,"span"),a(19),i()()()(),o(20,"div")(21,"div")(22,"span"),a(23),O(24,"currency"),i(),I(25,qt,2,3,"span",32),I(26,Bt,2,3,"span",32),i(),o(27,"button",37),g("click",function(c){let l=T(t).$implicit,P=_();return c.stopPropagation(),v(P.deleteTransaction(l))}),b(28,"lucide-icon",38),i()()()}if(s&2){let t=e.$implicit,n=_();m(p("transaction-item ",t.transactionType.toLowerCase())),r(),m(p("item-left ",t.transactionType.toLowerCase())),r(),m(p("type-indicator ",t.transactionType.toLowerCase())),r(2),f(t.transactionType==="INCOME"?"\u2191":t.transactionType==="EXPENSE"?"\u2193":t.transactionType==="CREDIT_PAYMENT"?"\u{1F4B3}":"\u21C4"),r(),m(p("item-details ",t.transactionType.toLowerCase())),r(),m(p("description ",t.transactionType.toLowerCase())),r(),f(t.description),r(),m(p("meta ",t.transactionType.toLowerCase())),r(),m(p("category ",t.transactionType.toLowerCase())),r(),L("\u{1F3F7}\uFE0F ",n.getCategoryName(t.categoryId)),r(3),m(p("date ",t.transactionType.toLowerCase())),r(),f(H(15,50,t.date,"MMM d, y")),r(4),m(p("account ",t.transactionType.toLowerCase())),r(),L("\u{1F4B3} ",n.getPaymentMethodName(t.paymentMethodId)),r(),m(p("item-right ",t.transactionType.toLowerCase())),r(),m(p("amount-container ",t.transactionType.toLowerCase())),r(),m(p("amount-value ",t.transactionType.toLowerCase())),r(),Y(" ",t.transactionType==="INCOME"?"":"-","",E(24,53,t.amount,"MXN","symbol-narrow","1.2-2")," "),r(2),N(t.isShared?25:-1),r(),N(t.hasInstallments?26:-1),r(),m(p("btn-more ",t.transactionType.toLowerCase())),r(),d("img",n.icons.X)("size",18)}}function Ht(s,e){if(s&1){let t=U();o(0,"app-transaction-form",39),g("submit",function(){T(t);let c=_();return v(c.onSubmit())})("close",function(){T(t);let c=_();return v(c.closeForm())}),i()}if(s&2){let t=_();d("form",t.transactionForm)("type",t.selectedTransactionType())("transaction",t.selectedTransaction())("categories",t.categories())("paymentMethods",t.paymentMethods())("users",t.users())("submitting",t.submitting())}}var St=class s{icons={Plus:ct,X:dt,ArrowUpCircle:it,ArrowDownCircle:ot,CreditCard:at,ArrowLeftRight:tt,Filter:st,Tag:lt,MoreVertical:rt,Calendar:et,AlertCircle:nt};fb=h(Tt);transactionService=h(gt);categoryService=h(ut);paymentMethodService=h(vt);userService=h(Et);authService=h(Z);transactions=u([]);categories=u([]);paymentMethods=u([]);users=u([]);loading=u(!1);showForm=u(!1);selectedTransaction=u(null);selectedTransactionType=u("EXPENSE");submitting=u(!1);filterStartDate=u("");filterEndDate=u("");filterUserId=u(null);filterPaymentMethodId=u(null);transactionForm;availablePaymentMethods=M(()=>{let e=this.selectedTransactionType(),t=this.paymentMethods();return e==="TRANSFER"?t.filter(n=>n.accountType!=="CREDIT"):t});availableDestinationMethods=M(()=>{let e=this.transactionForm?.get("paymentMethodId")?.value;return e?this.paymentMethods().filter(t=>t.id!==e):this.paymentMethods()});filteredTransactions=M(()=>{let e=this.transactions(),t=this.filterUserId();t!==null&&(e=e.filter(c=>c.userId===t));let n=this.filterPaymentMethodId();return n!==null&&(e=e.filter(c=>c.paymentMethodId===n)),e.slice().sort((c,l)=>new Date(l.date).getTime()-new Date(c.date).getTime())});expenses=M(()=>this.filteredTransactions().filter(e=>e.transactionType==="EXPENSE"));incomes=M(()=>this.filteredTransactions().filter(e=>e.transactionType==="INCOME"));totalExpenses=M(()=>this.expenses().reduce((e,t)=>e+t.amount,0));totalIncomes=M(()=>this.incomes().reduce((e,t)=>e+t.amount,0));balance=M(()=>this.totalIncomes()-this.totalExpenses());constructor(){q(()=>{let e=this.selectedTransactionType();this.transactionForm&&this.updateFormForTransactionType(e)})}ngOnInit(){this.initForm(),this.initFilters(),this.loadData()}initFilters(){let e=new Date().toISOString().split("T")[0],t=new Date(Date.now()-2160*60*60*1e3).toISOString().split("T")[0];this.filterStartDate.set(t),this.filterEndDate.set(e)}initForm(){this.transactionForm=this.fb.group({description:["",[C.required,C.minLength(3)]],amount:[0,[C.required,C.min(.01)]],date:[new Date().toISOString().split("T")[0],C.required],transactionType:["EXPENSE",C.required],categoryId:[null],paymentMethodId:[null,C.required],destinationPaymentMethodId:[null],isShared:[!1],hasInstallments:[!1],totalInstallments:[1]})}updateFormForTransactionType(e){let t=this.transactionForm.get("categoryId"),n=this.transactionForm.get("destinationPaymentMethodId"),c=this.transactionForm.get("hasInstallments"),l=this.transactionForm.get("totalInstallments");switch(n?.setValue(null),e){case"EXPENSE":case"INCOME":t?.setValidators([C.required]),t?.enable(),n?.clearValidators(),n?.disable(),c?.enable(),l?.enable();break;case"CREDIT_PAYMENT":t?.clearValidators(),t?.disable(),n?.clearValidators(),n?.disable(),c?.setValue(!1),c?.disable(),l?.setValue(1),l?.disable();break;case"TRANSFER":t?.clearValidators(),t?.disable(),n?.setValidators([C.required]),n?.enable(),c?.setValue(!1),c?.disable(),l?.setValue(1),l?.disable();break}t?.updateValueAndValidity(),n?.updateValueAndValidity()}loadData(){let e=this.authService.getTenantId();if(!e)return;this.loading.set(!0);let t=this.filterStartDate(),n=this.filterEndDate();Promise.all([this.transactionService.getTransactionsByTenant(e,{startDate:t,endDate:n}).toPromise(),this.categoryService.getByTenant(e,0,100).toPromise(),this.paymentMethodService.getByTenant(e,0,100).toPromise(),this.userService.getUsersByTenant(e).toPromise()]).then(([c,l,P,y])=>{this.transactions.set(c||[]),this.categories.set(l?.content||[]),this.paymentMethods.set(P?.content||[]),this.users.set(y||[]),this.loading.set(!1)}).catch(c=>{console.error("Error cargando datos:",c),this.loading.set(!1)})}applyDateFilter(){this.loadData()}openCreateForm(e){this.selectedTransaction.set(null),this.selectedTransactionType.set(e),this.transactionForm.reset({description:"",amount:0,date:new Date().toISOString().split("T")[0],transactionType:e,categoryId:null,paymentMethodId:null,destinationPaymentMethodId:null,isShared:!1,hasInstallments:!1,totalInstallments:1}),this.updateFormForTransactionType(e),this.showForm.set(!0)}editTransaction(e){this.selectedTransaction.set(e);let t=e.transactionType;this.selectedTransactionType.set(t),this.transactionForm.patchValue({description:e.description,amount:e.amount,date:e.date.split("T")[0],transactionType:e.transactionType,categoryId:e.categoryId,paymentMethodId:e.paymentMethodId,destinationPaymentMethodId:e.destinationPaymentMethodId,isShared:e.isShared,hasInstallments:e.hasInstallments,totalInstallments:e.totalInstallments}),this.updateFormForTransactionType(t),this.showForm.set(!0)}onSubmit(){if(this.transactionForm.invalid||this.submitting())return;this.submitting.set(!0);let e=this.authService.getTenantId(),t=this.authService.currentUser()?.id;if(!e||!t){this.submitting.set(!1);return}let n=this.transactionForm.value,c={tenantId:e,userId:t,description:n.description,amount:n.amount,date:n.date,transactionType:n.transactionType,paymentMethodId:n.paymentMethodId,isShared:n.isShared,hasInstallments:n.hasInstallments,totalInstallments:n.totalInstallments,categoryId:n.transactionType==="EXPENSE"||n.transactionType==="INCOME"?n.categoryId:void 0,destinationPaymentMethodId:n.transactionType==="TRANSFER"?n.destinationPaymentMethodId:void 0},l=this.selectedTransaction();(l?this.transactionService.updateTransaction(l.id,c):this.transactionService.createTransaction(c)).subscribe({next:()=>{this.loadData(),this.closeForm(),this.submitting.set(!1)},error:y=>{alert("Error: "+(y.error?.message||"No se pudo guardar")),this.submitting.set(!1)}})}deleteTransaction(e){confirm(`\xBFEliminar transacci\xF3n "${e.description}"?`)&&this.transactionService.deleteTransaction(e.id).subscribe(()=>this.loadData())}closeForm(){this.showForm.set(!1),this.selectedTransaction.set(null)}getCategoryName(e){return this.categories().find(t=>t.id===e)?.name||"Sin categor\xEDa"}getPaymentMethodName(e){let t=this.paymentMethods().find(n=>n.id===e);return t?t.alias?`${t.bankName} \u2014 ${t.alias}`:t.bankName:"Sin m\xE9todo"}getTypeConfig(e){let t={EXPENSE:{icon:this.icons.ArrowDownCircle,class:"type-expense",label:"Gasto"},INCOME:{icon:this.icons.ArrowUpCircle,class:"type-income",label:"Ingreso"},CREDIT_PAYMENT:{icon:this.icons.CreditCard,class:"type-credit",label:"Pago TC"},TRANSFER:{icon:this.icons.ArrowLeftRight,class:"type-transfer",label:"Transferencia"}};return t[e]||t.EXPENSE}getTransactionTypeColor(e){switch(e){case"INCOME":return"income";case"EXPENSE":return"expense";case"CREDIT_PAYMENT":return"credit";case"TRANSFER":return"transfer";default:return""}}onUserFilterChange(e){let t=e.target.value;this.filterUserId.set(t==="null"?null:+t)}get availableUsers(){let e=new Set(this.transactions().map(t=>t.userId));return Array.from(e).map(t=>({id:t,name:this.users().find(n=>n.id===t)?.name||`ID: ${t}`})).sort((t,n)=>t.name.localeCompare(n.name))}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=S({type:s,selectors:[["app-transactions"]],decls:74,vars:25,consts:[[1,"transactions-page"],[1,"page-header"],[1,"header-left"],[1,"page-title"],[1,"page-subtitle"],[1,"summary-cards"],[1,"summary-card","income"],[1,"card-icon"],[1,"card-info"],[1,"label"],[1,"amount"],[1,"summary-card","expense"],[1,"summary-card","balance"],[1,"toolbar"],[1,"filters-bar"],[1,"filter-group"],["for","filterStartDate"],["id","filterStartDate","type","date",1,"filter-input",3,"change","value"],["for","filterEndDate"],["id","filterEndDate","type","date",1,"filter-input",3,"change","value"],["for","filterUserId"],["id","filterUserId",1,"filter-select",3,"change","value"],["value",""],[3,"value"],["for","filterPaymentMethodId"],["id","filterPaymentMethodId",1,"filter-select",3,"change","value"],[1,"action-buttons"],["title","Registra un gasto que s\xED descuenta de tu saldo total.",1,"btn-action","expense",3,"click"],["title","Registra un ingreso que suma a tu saldo total.",1,"btn-action","income",3,"click"],["title","Registra pagos a tu tarjeta, no afecta el saldo total.",1,"btn-action","credit",3,"click"],["title","Transfiere entre tus cuentas, el dinero sigue disponible.",1,"btn-action","transfer",3,"click"],[1,"transactions-list"],[3,"class"],[3,"form","type","transaction","categories","paymentMethods","users","submitting"],[3,"click"],[1,"icon"],[1,"divider"],["title","Eliminar",3,"click"],[3,"img","size"],[3,"submit","close","form","type","transaction","categories","paymentMethods","users","submitting"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),a(4,"Historial de Transacciones"),i(),o(5,"p",4),a(6,"Gestiona y supervisa tus movimientos financieros"),i()(),o(7,"div",5)(8,"div",6)(9,"div",7),a(10,"\u2191"),i(),o(11,"div",8)(12,"span",9),a(13,"INGRESOS"),i(),o(14,"span",10),a(15),O(16,"currency"),i()()(),o(17,"div",11)(18,"div",7),a(19,"\u2193"),i(),o(20,"div",8)(21,"span",9),a(22,"GASTOS"),i(),o(23,"span",10),a(24),O(25,"currency"),i()()(),o(26,"div",12)(27,"div",7),a(28,"\u21C4"),i(),o(29,"div",8)(30,"span",9),a(31,"NETO"),i(),o(32,"span",10),a(33),O(34,"currency"),i()()()()(),o(35,"div",13)(36,"div",14)(37,"div",15)(38,"label",16),a(39,"Desde"),i(),o(40,"input",17),g("change",function(l){return n.filterStartDate.set(l.target.value),n.applyDateFilter()}),i()(),o(41,"div",15)(42,"label",18),a(43,"Hasta"),i(),o(44,"input",19),g("change",function(l){return n.filterEndDate.set(l.target.value),n.applyDateFilter()}),i()(),o(45,"div",15)(46,"label",20),a(47,"Persona"),i(),o(48,"select",21),g("change",function(l){return n.filterUserId.set(l.target.value?+l.target.value:null)}),o(49,"option",22),a(50,"Todas las personas"),i(),F(51,$t,2,2,"option",23,X),i()(),o(53,"div",15)(54,"label",24),a(55,"Tarjeta/Cuenta"),i(),o(56,"select",25),g("change",function(l){return n.filterPaymentMethodId.set(l.target.value?+l.target.value:null)}),o(57,"option",22),a(58,"Todas las tarjetas/cuentas"),i(),F(59,jt,2,2,"option",23,X),i()()(),o(61,"div",26)(62,"button",27),g("click",function(){return n.openCreateForm("EXPENSE")}),a(63,"+ Registrar Gasto"),i(),o(64,"button",28),g("click",function(){return n.openCreateForm("INCOME")}),a(65,"+ Ingreso"),i(),o(66,"button",29),g("click",function(){return n.openCreateForm("CREDIT_PAYMENT")}),a(67,"Pago de Tarjeta (no descuenta saldo)"),i(),o(68,"button",30),g("click",function(){return n.openCreateForm("TRANSFER")}),a(69,"Transferencia Interna (no descuenta saldo)"),i()()(),o(70,"div",31),F(71,Yt,29,58,"div",32,X),i(),I(73,Ht,1,7,"app-transaction-form",33),i()),t&2&&(r(15),f(E(16,10,n.totalIncomes(),"MXN","symbol","1.2-2")),r(9),f(E(25,15,n.totalExpenses(),"MXN","symbol","1.2-2")),r(2),B("negative",n.balance()<0),r(7),f(E(34,20,n.balance(),"MXN","symbol","1.2-2")),r(7),d("value",n.filterStartDate()),r(4),d("value",n.filterEndDate()),r(4),d("value",n.filterUserId()??""),r(3),w(n.availableUsers),r(5),d("value",n.filterPaymentMethodId()??""),r(3),w(n.paymentMethods()),r(12),w(n.filteredTransactions()),r(2),N(n.showForm()?73:-1))},dependencies:[D,A,k,R,pt,mt,V,W,Q],styles:['@charset "UTF-8";.transactions-page[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto;font-family:Inter,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:800;color:#0f172a;margin:0}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:4px 0 0}.summary-cards[_ngcontent-%COMP%]{display:flex;gap:16px}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;padding:16px 24px;border-radius:16px;border:1px solid #f1f5f9;display:flex;align-items:center;gap:12px;min-width:180px;box-shadow:0 4px 6px -1px #0000000d}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:11px;font-weight:700;color:#94a3b8;letter-spacing:.5px}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:18px;font-weight:800;color:#0f172a}.summary-cards[_ngcontent-%COMP%]   .summary-card.income[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#ecfdf5;color:#10b981}.summary-cards[_ngcontent-%COMP%]   .summary-card.expense[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#fef2f2;color:#ef4444}.summary-cards[_ngcontent-%COMP%]   .summary-card.balance[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#f5f3ff;color:#8b5cf6}.toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:24px;background:#fff;padding:16px;border-radius:12px;border:1px solid #f1f5f9}.toolbar[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;margin-bottom:8px}.toolbar[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;min-width:140px}.toolbar[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .filter-input[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:8px 12px;border-radius:8px;border:1px solid #e2e8f0;font-size:14px;background:#fff;color:#1e293b;width:100%}.toolbar[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#475569;margin-bottom:4px}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{padding:10px 20px;border-radius:10px;font-weight:600;cursor:pointer;border:none;transition:.2s;font-size:15px}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.expense[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.expense[_ngcontent-%COMP%]:hover{background:#dc2626}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.income[_ngcontent-%COMP%]{background:#10b981;color:#fff}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.income[_ngcontent-%COMP%]:hover{background:#059669}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.credit[_ngcontent-%COMP%]{background:#8b5cf6;color:#fff}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.credit[_ngcontent-%COMP%]:hover{background:#6d28d9}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.transfer[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fbbf24,#f59e42);color:#fff}.toolbar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.transfer[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#f59e42,#fbbf24)}.transactions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]{background:#fff;padding:16px 24px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #f8fafc;transition:.2s;cursor:pointer}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]:hover{background:#fafafa}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .type-indicator[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#f1f5f9;color:#64748b}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .type-indicator.expense[_ngcontent-%COMP%]{border:2px solid #ef4444;color:#ef4444;background:#fff}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .type-indicator.income[_ngcontent-%COMP%]{border:2px solid #10b981;color:#10b981;background:#fff}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .type-indicator.credit_payment[_ngcontent-%COMP%]{border:2px solid #8b5cf6;color:#8b5cf6;background:#fff}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .type-indicator.transfer[_ngcontent-%COMP%]{border:2px solid #f59e42;color:#f59e42;background:#fff}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:700;color:#1e293b;font-size:16px}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:12px;color:#94a3b8;display:flex;gap:6px;margin-top:4px}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .amount-container[_ngcontent-%COMP%]{text-align:right}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:800;color:#1e293b}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .amount-value.expense[_ngcontent-%COMP%]{color:#ef4444}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .amount-value.income[_ngcontent-%COMP%]{color:#10b981}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .amount-value.credit_payment[_ngcontent-%COMP%]{color:#8b5cf6}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .amount-value.transfer[_ngcontent-%COMP%]{color:#f59e42}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .badge-shared[_ngcontent-%COMP%]{font-size:10px;font-weight:800;color:#6366f1;background:#eef2ff;padding:2px 8px;border-radius:4px;margin-top:4px;display:inline-block}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .badge-shared.expense[_ngcontent-%COMP%]{color:#ef4444;background:#fee2e2}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .badge-shared.income[_ngcontent-%COMP%]{color:#10b981;background:#d1fae5}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .badge-shared.credit_payment[_ngcontent-%COMP%]{color:#8b5cf6;background:#ede9fe}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .badge-shared.transfer[_ngcontent-%COMP%]{color:#f59e42;background:#fef3c7}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .btn-more.expense[_ngcontent-%COMP%]{color:#ef4444}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .btn-more.income[_ngcontent-%COMP%]{color:#10b981}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .btn-more.credit_payment[_ngcontent-%COMP%]{color:#8b5cf6}.transactions-list[_ngcontent-%COMP%]   .transaction-item[_ngcontent-%COMP%]   .btn-more.transfer[_ngcontent-%COMP%]{color:#f59e42}']})};export{St as TransactionsComponent};
