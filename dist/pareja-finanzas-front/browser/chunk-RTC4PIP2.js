import{d as F}from"./chunk-N3A6TWTA.js";import{b as E,d as V,e as A,f as I,g as T,h as L,q as O,t as W}from"./chunk-EFCWVEXT.js";import{g as P,h as k}from"./chunk-3SXPRKRB.js";import{$a as i,Fa as h,Ka as C,Oa as y,V as g,W as c,Wb as S,Za as p,_a as n,_b as v,fb as b,gb as x,hb as m,qb as d,rb as w,sb as M,ub as u,vb as f,wb as _,xa as a}from"./chunk-VKFMD7IK.js";function R(l,s){if(l&1){let e=b();n(0,"form",5),x("ngSubmit",function(){g(e);let t=m();return c(t.login())}),n(1,"div",6)(2,"label",7),d(3,"Email"),i(),n(4,"input",8),_("ngModelChange",function(t){g(e);let o=m();return f(o.loginForm.email,t)||(o.loginForm.email=t),c(t)}),i()(),n(5,"div",6)(6,"label",9),d(7,"Contrase\xF1a"),i(),n(8,"input",10),_("ngModelChange",function(t){g(e);let o=m();return f(o.loginForm.password,t)||(o.loginForm.password=t),c(t)}),i()(),n(9,"button",11),d(10,"Entrar"),i()()}if(l&2){let e=m();a(4),u("ngModel",e.loginForm.email),a(4),u("ngModel",e.loginForm.password),a(),p("disabled",e.loading)}}function q(l,s){if(l&1){let e=b();n(0,"form",5),x("ngSubmit",function(){g(e);let t=m();return c(t.register())}),n(1,"div",6)(2,"label",12),d(3,"Nombre"),i(),n(4,"input",13),_("ngModelChange",function(t){g(e);let o=m();return f(o.registerForm.name,t)||(o.registerForm.name=t),c(t)}),i()(),n(5,"div",6)(6,"label",14),d(7,"Email"),i(),n(8,"input",15),_("ngModelChange",function(t){g(e);let o=m();return f(o.registerForm.email,t)||(o.registerForm.email=t),c(t)}),i()(),n(9,"div",6)(10,"label",16),d(11,"Contrase\xF1a"),i(),n(12,"input",17),_("ngModelChange",function(t){g(e);let o=m();return f(o.registerForm.password,t)||(o.registerForm.password=t),c(t)}),i()(),n(13,"button",11),d(14,"Registrarse"),i()()}if(l&2){let e=m();a(4),u("ngModel",e.registerForm.name),a(4),u("ngModel",e.registerForm.email),a(4),u("ngModel",e.registerForm.password),a(),p("disabled",e.loading)}}function B(l,s){if(l&1&&(n(0,"div",18),d(1),i()),l&2){let e=m();a(),w(e.error)}}var N=class l{constructor(s,e,r){this.authService=s;this.tokenService=e;this.router=r}isLogin=!0;loading=!1;error=null;loginForm={email:"",password:""};registerForm={name:"",email:"",password:"",tenantId:void 0};switchMode(){this.isLogin=!this.isLogin,this.error=null}login(){this.loading=!0,this.error=null,console.log("\u{1F510} Intentando login con:",this.loginForm.email),this.authService.login(this.loginForm).subscribe({next:s=>{console.log("\u2705 Login exitoso:",s),this.loading=!1,this.router.navigate(["/main/dashboard"])},error:s=>{console.error("\u274C Error en login:",s),this.error=s.error?.message||"Credenciales inv\xE1lidas",this.loading=!1}})}register(){this.loading=!0,this.authService.register(this.registerForm).subscribe({next:s=>{this.tokenService.setToken(s.token),this.loading=!1,this.router.navigate(["/main/dashboard"])},error:()=>{this.error="Error al registrar",this.loading=!1}})}static \u0275fac=function(e){return new(e||l)(h(k),h(P),h(F))};static \u0275cmp=C({type:l,selectors:[["app-auth"]],decls:9,vars:5,consts:[[1,"auth-container","glass"],[1,"auth-card"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],["class","error-message",4,"ngIf"],["type","button",1,"btn-link",3,"click"],["autocomplete","off",3,"ngSubmit"],[1,"form-group"],["for","loginEmail"],["id","loginEmail","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","loginPassword"],["id","loginPassword","type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],["for","registerName"],["id","registerName","type","text","name","name","required","",3,"ngModelChange","ngModel"],["for","registerEmail"],["id","registerEmail","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","registerPassword"],["id","registerPassword","type","password","name","password","required","",3,"ngModelChange","ngModel"],[1,"error-message"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),d(3),i(),y(4,R,11,3,"form",2)(5,q,15,4,"form",2)(6,B,2,1,"div",3),n(7,"button",4),x("click",function(){return r.switchMode()}),d(8),i()()()),e&2&&(a(3),w(r.isLogin?"Iniciar sesi\xF3n":"Registrarse"),a(),p("ngIf",r.isLogin),a(),p("ngIf",!r.isLogin),a(),p("ngIf",r.error),a(2),M(" ",r.isLogin?"\xBFNo tienes cuenta? Reg\xEDstrate":"\xBFYa tienes cuenta? Inicia sesi\xF3n"," "))},dependencies:[v,S,W,L,E,V,A,O,T,I],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem}.auth-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;box-shadow:0 20px 60px #0000004d;padding:3rem 2.5rem;min-width:360px;max-width:420px;width:100%;display:flex;flex-direction:column;gap:1.5rem}h2[_ngcontent-%COMP%]{font-family:Inter,SF Pro Display,sans-serif;font-weight:700;font-size:28px;margin-bottom:.5rem;color:#1d1d1f;text-align:center;letter-spacing:-.5px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#6e6e73;margin-bottom:.25rem}input[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-radius:12px;padding:.875rem 1rem;font-size:16px;background:#fff;color:#1d1d1f;outline:none;transition:all .2s ease}input[_ngcontent-%COMP%]:focus{border-color:#007aff;box-shadow:0 0 0 4px #007aff1a;background:#fff}input[_ngcontent-%COMP%]::placeholder{color:#c7c7cc}.btn-primary[_ngcontent-%COMP%]{background:#007aff;color:#fff;border:none;border-radius:12px;padding:.875rem 1.5rem;font-size:16px;font-weight:600;cursor:pointer;margin-top:1rem;transition:all .2s ease;box-shadow:0 4px 12px #007aff4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0051d5;transform:translateY(-1px);box-shadow:0 6px 16px #007aff66}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-primary[_ngcontent-%COMP%]:disabled{background:#c7c7cc;cursor:not-allowed;box-shadow:none}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#007aff;font-size:15px;font-weight:500;cursor:pointer;margin-top:.5rem;transition:color .2s ease}.btn-link[_ngcontent-%COMP%]:hover{color:#0051d5}.error-message[_ngcontent-%COMP%]{color:#ff3b30;font-size:14px;font-weight:500;margin-top:.5rem;text-align:center;background:#ff3b301a;padding:.75rem;border-radius:8px}"]})};export{N as AuthComponent};
